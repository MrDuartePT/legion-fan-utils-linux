# Maintainer: MrDuartePT <gonegrier.duarte@gmail.comm>
pkgname=${_pkgname}-git
_pkgname=LenovoLegionLinux 
pkgver=fb15131ab26d4095ec6d24153c6581b55eba480e
pkgrel=1
epoch=
pkgdesc="LenovoLegionLinux (LLL) brings additional drivers and tools for Lenovo Legion series laptops to Linux. It is the alternative to Lenovo Vantage or Legion Zone (both Windows only). PLEASE READ THE REPO BEFORE INSTALL THIS PACKAGE!!!"
arch=("x86_64")
url="https://github.com/johnfanv2/LenovoLegionLinux"
license=('GPL')
makedepends=("git"
		"linux-headers" 
		"base-devel" 
		"lm-sensors" 
		"dmidecode" 
		"python-pyqt5"
)
optdepends=(
		"legion-fan-utils-linux-git: Systemd service that will apply a given profile"
)
options=(!makeflags !buildflags !strip)
changelog=
source=("${_pkgname}::git+https://github.com/johnfanv2/LenovoLegionLinux.git")
sha256sums=('SKIP')

package() {
	cd "${srcdir}/${_pkgname}"
	mkdir -p /etc/lenovo-fan-control/profiles
	cp service/profiles/* /etc/lenovo-fan-control/profiles
	cp service/fancurve-set.sh /etc/lenovo-fan-control
	cp service/lenovo-legion-fan-service.py /usr/local/bin/lenovo-legion-fan-service.py
	cp profile_man.py /usr/local/bin/lenovo-legion-manager.py
	cp service/*.service /etc/systemd/system
	cp service/*.path /etc/systemd/system
	systemctl daemon-reload
	systemctl enable --now lenovo-fancurve.service 
	systemctl enable --now lenovo-fancurve-restart.path lenovo-fancurve-restart.service
}
